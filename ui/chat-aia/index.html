<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="./index.css" />
  <script src="./colors.js"></script>
  <script src="./modal.js"></script>
  <script src="./inject.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    if (!urlParams.get('aiAgentId')) {
      urlParams.append('aiAgentId', window.prompt('enter AI Agent Id'));
      window.location.search = urlParams;
    }
    
    // Check for aiAgentId in URL params, then localStorage, then prompt
    if (!urlParams.get('aiAgentId')) {
      const savedAiAgentId = localStorage.getItem('aiAgentId');
      if (!savedAiAgentId) {
        urlParams.append('aiAgentId', window.prompt('enter AI Agent Id'));
        window.location.search = urlParams;
      }
    }
  </script>
  <title>Cresta chat demo</title>
  <style type="text/css">
    html {
      overflow: auto;
    }

    html,
    body,
    div#content,
    iframe {
      margin: 0px;
      padding: 0px;
      height: 100%;
      border: none;
    }
  </style>
</head>

<body>
  <div id="content">
  </div>
  <div class="settings-buttons">
    <button class="settings-button" onclick="handleColorSettings()">ðŸŽ¨</button>
  </div>
  <div class="settings-buttons">
    <svg id="injectedMicButton" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
      <path id="micIcon"
          d="M12 14a3 3 0 0 0 3-3V5a3 3 0 0 0-6 0v6a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0h-2zm-5 9a7 7 0 0 0 7-7h2a9 9 0 0 1-18 0h2a7 7 0 0 0 7 7z" />
  </svg>
  </div>
  
  <!-- Color Settings Form Modal -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ðŸŽ¨ Settings</h2>
        <span class="close" onclick="closeSettingsModal()">&times;</span>
      </div>
      
      <form id="colorSettingsForm">
        <div class="form-group">
          <label for="aiAgentId">AI Agent ID:</label>
          <input type="text" id="aiAgentId" name="aiAgentId" placeholder="e.g., b414de7f-7b26-42e0-8489-0834619014ed">
        </div>
        
        <div class="form-group">
          <label for="namespace">Namespace:</label>
          <input type="text" id="namespace" name="namespace" placeholder="e.g., virtual-agent-sandbox">
        </div>
        
        <div class="form-group">
          <label for="chatIcon">Chat Icon URL:</label>
          <input type="text" id="chatIcon" name="chatIcon" placeholder="e.g., https://example.com/icon.png">
        </div>
        
        <div class="form-group">
          <label for="titlebarColor">Titlebar Color:</label>
          <input type="text" id="titlebarColor" name="titlebarColor" placeholder="e.g., black, #000000">
        </div>
        
        <div class="form-group">
          <label for="titlebarFontColor">Titlebar Font Color:</label>
          <input type="text" id="titlebarFontColor" name="titlebarFontColor" placeholder="e.g., white, #ffffff">
        </div>
        
        <div class="form-group">
          <label for="chatBackgroundColor">Chat Background Color:</label>
          <input type="text" id="chatBackgroundColor" name="chatBackgroundColor" placeholder="e.g., #f1f2f4">
        </div>
        
        <div class="form-group">
          <label for="userMessageBackgroundColor">User Message Background:</label>
          <input type="text" id="userMessageBackgroundColor" name="userMessageBackgroundColor" placeholder="e.g., black, #000000">
        </div>
        
        <div class="form-group">
          <label for="userMessageTextColor">User Message Text Color:</label>
          <input type="text" id="userMessageTextColor" name="userMessageTextColor" placeholder="e.g., white, #ffffff">
        </div>
        
        <div class="form-group">
          <label for="aiMessageBackgroundColor">AI Message Background:</label>
          <input type="text" id="aiMessageBackgroundColor" name="aiMessageBackgroundColor" placeholder="e.g., black, #000000">
        </div>
        
        <div class="form-group">
          <label for="aiMessageTextColor">AI Message Text Color:</label>
          <input type="text" id="aiMessageTextColor" name="aiMessageTextColor" placeholder="e.g., black, #000000">
        </div>
        
        <div class="form-group">
          <label for="sendIconColor">Send Icon Color:</label>
          <input type="text" id="sendIconColor" name="sendIconColor" placeholder="e.g., black, #000000">
        </div>
        
        <div class="form-group">
          <label for="inputBorderColor">Input Border Color:</label>
          <input type="text" id="inputBorderColor" name="inputBorderColor" placeholder="e.g., black, #000000">
        </div>
        
        <div class="form-group">
          <label for="closeIconColor">Close Icon Color:</label>
          <input type="text" id="closeIconColor" name="closeIconColor" placeholder="e.g., black, #000000">
        </div>
        
        <div class="form-group">
          <label for="widgetBackgroundColor">Widget Background Color:</label>
          <input type="text" id="widgetBackgroundColor" name="widgetBackgroundColor" placeholder="e.g., white, #ffffff">
        </div>
        
        <div class="form-buttons">
          <button type="button" onclick="resetToDefaults()">Reset to Defaults</button>
          <button type="button" onclick="closeSettingsModal()">Cancel</button>
          <button type="submit">Apply Settings</button>
        </div>
      </form>
    </div>
  </div>
</body>

</html>