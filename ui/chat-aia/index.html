<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="./index.css" />
  <script src="./colors.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    if (!urlParams.get('aiAgentId')) {
      urlParams.append('aiAgentId', window.prompt('enter AI Agent Id'));
      window.location.search = urlParams;
    }
    
    // Check for aiAgentId in URL params, then localStorage, then prompt
    if (!urlParams.get('aiAgentId')) {
      const savedAiAgentId = localStorage.getItem('aiAgentId');
      if (!savedAiAgentId) {
        urlParams.append('aiAgentId', window.prompt('enter AI Agent Id'));
        window.location.search = urlParams;
      }
    }
  </script>
  <title>Cresta chat demo</title>
  <style type="text/css">
    html {
      overflow: auto;
    }

    html,
    body,
    div#content,
    iframe {
      margin: 0px;
      padding: 0px;
      height: 100%;
      border: none;
    }
  </style>
</head>

<body>
  <div id="content">
  </div>
  <div class="settings-buttons">
    <button class="settings-button" onclick="handleColorSettings()">ðŸŽ¨</button>
  </div>
  
  <!-- Color Settings Form Modal -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ðŸŽ¨ Color Settings</h2>
        <span class="close" onclick="closeSettingsModal()">&times;</span>
      </div>
      
      <form id="colorSettingsForm">
        <div class="form-group">
          <label for="aiAgentId">AI Agent ID:</label>
          <input type="text" id="aiAgentId" name="aiAgentId" placeholder="e.g., b414de7f-7b26-42e0-8489-0834619014ed">
        </div>
        
        <div class="form-group">
          <label for="primaryColor">Primary Color:</label>
          <input type="text" id="primaryColor" name="primaryColor" placeholder="e.g., purple, #800080, rgb(128,0,128)">
        </div>
        
        <div class="form-group">
          <label for="textOnPrimary">Text on Primary:</label>
          <input type="text" id="textOnPrimary" name="textOnPrimary" placeholder="e.g., white, black, #ffffff">
        </div>
        
        <div class="form-group">
          <label for="visitorBg">Visitor Background:</label>
          <input type="text" id="visitorBg" name="visitorBg" placeholder="e.g., lightblue, #add8e6">
        </div>
        
        <div class="form-group">
          <label for="textOnVisitor">Text on Visitor:</label>
          <input type="text" id="textOnVisitor" name="textOnVisitor" placeholder="e.g., black, white, #000000">
        </div>
        
        <div class="form-group">
          <label for="contentBgImage">Background Image:</label>
          <input type="text" id="contentBgImage" name="contentBgImage" placeholder="e.g., verizon-troubleshooting.png">
        </div>
        
        <div class="form-buttons">
          <button type="button" onclick="resetToDefaults()">Reset to Defaults</button>
          <button type="button" onclick="closeSettingsModal()">Cancel</button>
          <button type="submit">Apply Settings</button>
        </div>
      </form>
    </div>
  </div>
</body>

</html>