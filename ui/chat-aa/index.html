<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="./index.css" />
  <script src="./colors.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    
    // Check for namespace in URL params, then localStorage, then prompt
    if (!urlParams.get('namespace')) {
      const savedNamespace = localStorage.getItem('namespace');
      if (!savedNamespace) {
        urlParams.append('namespace', window.prompt('enter usecase'));
        window.location.search = urlParams;
      }
    }
  </script>
  <title>Cresta chat demo</title>
  <style type="text/css">
    html {
      overflow: auto;
    }

    html,
    body,
    div#content,
    iframe {
      margin: 0px;
      padding: 0px;
      height: 100%;
      border: none;
    }
  </style>
</head>

<body>
  <div id="content">
  </div>
  <div class="settings-buttons">
    <button class="settings-button" onclick="handleColorSettings()">ðŸŽ¨</button>
  </div>
  
  <!-- Color Settings Form Modal -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ðŸŽ¨ Settings</h2>
        <span class="close" onclick="closeSettingsModal()">&times;</span>
      </div>
      <form id="colorSettingsForm">
        <div class="form-group">
          <label for="primaryColor">Primary Color:</label>
          <input type="text" id="primaryColor" name="primaryColor" placeholder="e.g., purple, #800080, rgb(128,0,128)">
        </div>
        
        <div class="form-group">
          <label for="textOnPrimary">Text on Primary:</label>
          <input type="text" id="textOnPrimary" name="textOnPrimary" placeholder="e.g., white, black, #ffffff">
        </div>
        
        <div class="form-group">
          <label for="visitorBg">Visitor Background:</label>
          <input type="text" id="visitorBg" name="visitorBg" placeholder="e.g., lightblue, #add8e6">
        </div>
        
        <div class="form-group">
          <label for="textOnVisitor">Text on Visitor:</label>
          <input type="text" id="textOnVisitor" name="textOnVisitor" placeholder="e.g., black, white, #000000">
        </div>
        
        <div class="form-group">
          <label for="contentBgImage">Background Image:</label>
          <input type="text" id="contentBgImage" name="contentBgImage" placeholder="e.g., verizon-troubleshooting.png">
        </div>
        
        <div class="form-buttons">
          <button type="button" onclick="resetToDefaults()">Reset to Defaults</button>
          <button type="button" onclick="closeSettingsModal()">Cancel</button>
          <button type="submit">Apply Settings</button>
        </div>
      </form>
    </div>
  </div>
  <script type="application/javascript">
    var siteId = "84359050";
    window.lpTag = window.lpTag || {}; if (typeof window.lpTag._tagCount === 'undefined') {
      window.lpTag = {site: siteId, section: lpTag.section || '', autoStart: lpTag.autoStart === false ? false : true, ovr: lpTag.ovr || {}, _v: '1.5.1', _tagCount: 1, protocol: location.protocol, events: {bind: function (app, ev, fn) {lpTag.defer(function () {lpTag.events.bind(app, ev, fn);}, 0);}, trigger: function (app, ev, json) {lpTag.defer(function () {lpTag.events.trigger(app, ev, json);}, 1);}}, defer: function (fn, fnType) {if (fnType == 0) {this._defB = this._defB || []; this._defB.push(fn);} else if (fnType == 1) {this._defT = this._defT || []; this._defT.push(fn);} else {this._defL = this._defL || []; this._defL.push(fn);} }, load: function (src, chr, id) {var t = this; setTimeout(function () {t._load(src, chr, id);}, 0);}, _load: function (src, chr, id) {var url = src; if (!src) {url = this.protocol + '//' + ((this.ovr && this.ovr.domain) ? this.ovr.domain : 'lptag.liveperson.net') + '/tag/tag.js?site=' + this.site;} var s = document.createElement('script'); s.setAttribute('charset', chr ? chr : 'UTF-8'); if (id) {s.setAttribute('id', id);} s.setAttribute('src', url); document.getElementsByTagName('head').item(0).appendChild(s);}, init: function () {this._timing = this._timing || {}; this._timing.start = (new Date()).getTime(); var that = this; if (window.attachEvent) {window.attachEvent('onload', function () {that._domReady('domReady');});} else {window.addEventListener('DOMContentLoaded', function () {that._domReady('contReady');}, false); window.addEventListener('load', function () {that._domReady('domReady');}, false);} if (typeof (window._lptStop) == 'undefined') {this.load();} }, start: function () {this.autoStart = true;}, _domReady: function (n) {if (!this.isDom) {this.isDom = true; this.events.trigger('LPT', 'DOM_READY', {t: n});} this._timing[n] = (new Date()).getTime();}, vars: lpTag.vars || [], dbs: lpTag.dbs || [], ctn: lpTag.ctn || [], sdes: lpTag.sdes || [], ev: lpTag.ev || []}; lpTag.init();
    } else {window.lpTag._tagCount += 1;}
  </script>
</body>

</html>